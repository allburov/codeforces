<html>
<head>
 <title>Тренировка S13</title>
 <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
 <meta name="Author" content="Fyodor Menshikov, Vologda, Russia">
 <meta name="E-mail" content="mfv@mail.ru">
 <meta name="Homepage" content="http://www.uni-vologda.ac.ru/~mfv/">
</head>
<body bgcolor=white text=black>

<center><font size=+3>Тренировка S13</font></center><br>

<font size=-1>
Время тестирования приведено для Intel Celeron 400.<br>
Решения должны быть представлены на Turbo Pascal 7.0.
Объём памяти, предоставляемый программе, составляет 500 кб.
</font><br>

<a name="dlattice">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font size=+1>
Задача A. Двойная решётка</font><br><br>
Две бесконечные равномерные прямоугольные решётки заданы размерами ячеек
<i>x</i><sub>1</sub> <i>y</i><sub>1</sub> и <i>x</i><sub>2</sub>
<i>y</i><sub>2</sub>. Решётки расположены на плоскости параллельно друг другу
и координатным осям так, что смещение одного из узлов второй решётки
относительно узла первой составляет <i>D<sub>x</sub></i> по горизонтали и
<i>D<sub>y</sub></i> по вертикали. В результате наложения образуется новая,
"составная" решётка с более мелкими ячейками различного размера. Требуется
вывести в порядке возрастания все различные площади ячеек составной решётки.
<br>
<b>Ограничения:</b> 1&nbsp;&lt;=&nbsp;<i>x</i><sub>1</sub>,&nbsp;<i>y</i><sub>1</sub>,&nbsp;<i>x</i><sub>2</sub>,&nbsp;<i>y</i><sub>2</sub>&nbsp;&lt;=&nbsp;100,
0&nbsp;&lt;=&nbsp;<i>D<sub>x</sub></i>&nbsp;&lt;&nbsp;<i>x</i><sub>1</sub>,
0&nbsp;&lt;=&nbsp;<i>D<sub>y</sub></i>&nbsp;&lt;&nbsp;<i>y</i><sub>1</sub>,
все числа целые, время&nbsp;1&nbsp;с.<br>
<b>Ввод</b> из файла dlattice.in. В первой строке находятся числа
<i>x</i><sub>1</sub>, <i>y</i><sub>1</sub>, <i>x</i><sub>2</sub>,
<i>y</i><sub>2</sub>, <i>D<sub>x</sub></i>, <i>D<sub>y</sub></i>,
разделённые пробелами.<br>
<b>Вывод</b> в файл dlattice.out. В первой строке вывести <i>N</i> -
количество получившихся площадей, в следующих <i>N</i> строках - сами площади.
<br>
<b>Примеры</b>
<pre><b>Ввод 1</b>
20 20 12 10 2 0
<b>Вывод 1</b>
4
20
60
100
120
</pre>

<a name="fiboseq">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font size=+1>
Задача B. Последовательность Фибоначчи</font><br><br>
{<i>F<sub>k</sub></i>} - бесконечная последовательность целых чисел, которая
удовлетворяет условию Фибоначчи
<i>F<sub>k</sub></i>&nbsp;=&nbsp;<i>F</i><sub><i>k</i>&nbsp;-&nbsp;1</sub>&nbsp;+&nbsp;<i>F</i><sub><i>k</i>&nbsp;-&nbsp;2</sub>
(для любого целого <i>k</i>). Даны <i>i</i>, <i>F<sub>i</sub></i>, <i>j</i>,
<i>F<sub>j</sub></i>, <i>n</i> (<i>i</i>&nbsp;&lt;&gt;&nbsp;<i>j</i>). Найти
<i>F<sub>n</sub></i>. Пример части последовательности:
<br><br>
<center>
 <table cellspacing=0 cellpadding=5 border=1>
  <tr>
   <td width=10%><i>k</i></td>
   <td width=10% align=right>-2</td>
   <td width=10% align=right>-1</td>
   <td width=10% align=right>0</td>
   <td width=10% align=right>1</td>
   <td width=10% align=right>2</td>
   <td width=10% align=right>3</td>
   <td width=10% align=right>4</td>
   <td width=10% align=right>5</td>
   <td width=10% align=right>6</td>
  </tr>
  <tr>
   <td width=10%><i>F<sub>k</sub></i></td>
   <td width=10% align=right>-5</td>
   <td width=10% align=right>4</td>
   <td width=10% align=right>-1</td>
   <td width=10% align=right>3</td>
   <td width=10% align=right>2</td>
   <td width=10% align=right>5</td>
   <td width=10% align=right>7</td>
   <td width=10% align=right>12</td>
   <td width=10% align=right>19</td>
  </tr>
 </table>
</center><br>
<b>Ограничения:</b> -1000&nbsp;&lt;=&nbsp;<i>i</i>,&nbsp;<i>j</i>,&nbsp;<i>n</i>&nbsp;&lt;=&nbsp;1000,
-2&nbsp;000&nbsp;000&nbsp;000&nbsp;&lt;=&nbsp;<i>F<sub>k</sub></i>&nbsp;&lt;=&nbsp;2&nbsp;000&nbsp;000&nbsp;000
(<i>k</i>&nbsp;=&nbsp;min(<i>i</i>,&nbsp;<i>j</i>,&nbsp;<i>n</i>)&nbsp;...&nbsp;max(<i>i</i>,&nbsp;<i>j</i>,&nbsp;<i>n</i>)),
время&nbsp;1&nbsp;с.<br>
<b>Ввод</b> из файла fiboseq.in. В первой строке находятся числа <i>i</i>,
<i>F<sub>i</sub></i>, <i>j</i>, <i>F<sub>j</sub></i>, <i>n</i>.<br>
<b>Вывод</b> в файл fiboseq.out. Вывести одно число <i>F<sub>n</sub></i>.<br>
<b>Примеры</b>
<pre><b>Ввод 1</b>
3 5 -1 4 5
<b>Вывод 1</b>
12
</pre>

<a name="bracket3">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font size=+1>
Задача C. Скобки (3)</font><br><br>
Определим правильные скобочные выражения так:
<ol type="1">
<li>Пустое выражение - правильное.
<li>Если выражение <code>S</code> правильное, то <code>(S)</code> и
<code>[S]</code> также правильные.
<li>Если выражения <code>A</code> и <code>B</code> правильные, то
и выражение <code>AB</code> - правильное.
</ol>
Дана последовательность скобок "<code>(</code>", "<code>)</code>",
"<code>[</code>" и "<code>]</code>". Требуется найти самое короткое правильное
выражение, в котором данная последовательность является подпоследовательностью,
то&nbsp;есть такое, из которого можно вычеркнуть некоторые символы (возможно,
ноль) и получить исходную последовательность, не меняя порядок оставшихся.<br>
<b>Ограничения:</b> исходная последовательность содержит не более 100 скобок,
время&nbsp;1&nbsp;с.<br>
<b>Ввод</b> из файла bracket3.in. В первой строке находятся символы
<code>(</code>, <code>)</code>, <code>[</code> и <code>]</code> без пробелов.
<br>
<b>Вывод</b> в файл bracket3.out. Выводится искомая последовательность скобок
без пробелов.<br>
<b>Примеры</b>
<pre><b>Ввод 1</b>    <b>Ввод 2</b>    <b>Ввод 3</b>    <b>Ввод 4</b>
([(]      ([[)]]    (([))]    (([[[))]]]
<b>Вывод 1</b>   <b>Вывод 2</b>   <b>Вывод 3</b>   <b>Вывод 4</b>
()[()]    ([[()]])  (([]))[]  ()()[[[()()]]]
</pre>

<a name="centgrav">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font size=+1>
Задача D. Центр тяжести</font><br><br>
По координатам вершин многоугольника требуется найти координаты его центра
тяжести. Стороны многоугольника друг с другом не соприкасаются (за исключением
соседних - в вершинах) и не пересекаются. Площадь многоугольника не равна нулю.
<br>
<b>Ограничения:</b> число вершин
3&nbsp;&lt;=&nbsp;<i>N</i>&nbsp;&lt;=&nbsp;100&nbsp;000, координаты
вершин в декартовой системе координат целые и по модулю не превосходят
20&nbsp;000, время&nbsp;2&nbsp;с.<br>
<b>Ввод</b> из файла centgrav.in. В первой строке находится число <i>N</i>,
в следующих <i>N</i> строках - пары чисел - координаты точек. Если соединить
точки в данном порядке, а также соединить первую и последнюю точки, получится
заданный многоугольник.<br>
<b>Вывод</b> в файл centgrav.out. Вывести два числа с двумя знаками после
запятой - координаты центра тяжести.<br>
<b>Примеры</b>
<pre><b>Ввод 1</b>         <b>Ввод 2</b>
4              4
5 0            1 1
0 5            11 1
-5 0           11 11
0 -5           1 11
<b>Вывод 1</b>        <b>Вывод 2</b>
0.00 0.00      6.00 6.00
</pre>

<a name="prodsum">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font size=+1>
Задача E. Сумма произведений</font><br><br>
Дан набор переменных <i>x</i><sub>1</sub>, <i>x</i><sub>2</sub>, ...,
<i>x<sub>N</sub></i>. Каждая переменная <i>x<sub>i</sub></i> может принимать
значение только -1, 0 или +1. Для данного целого числа <i>S</i> требуется
определить количество способов присвоить переменным <i>x<sub>i</sub></i>
значения так, чтобы сумма всех возможных произведений
<i>x<sub>i</sub></i>&nbsp;*&nbsp;<i>x<sub>j</sub></i> была равна <i>S</i>, где
<i>i</i>&nbsp;&lt;&nbsp;<i>j</i> и
<i>i</i>,&nbsp;<i>j</i>&nbsp;=&nbsp;1, 2, ..., <i>N</i>.
Два способа считаются различными, если они содержат различное число
<i>x<sub>i</sub></i>&nbsp;=&nbsp;0.<br>
<b>Ограничения:</b> 2&nbsp;&lt;=&nbsp;<i>N</i>&nbsp;&lt;=&nbsp;10&nbsp;000,
-10&nbsp;000&nbsp;&lt;&nbsp;<i>S</i>&nbsp;&lt;&nbsp;10&nbsp;000,
время&nbsp;1&nbsp;с.<br>
<b>Ввод</b> из файла prodsum.in. В первой строке находятся числа
<i>N</i> и <i>S</i>, разделённые пробелом.<br>
<b>Вывод</b> в файл prodsum.out. Вывести одно целое число - количество
способов представить <i>S</i> как сумму произведений.<br>
<b>Примеры</b>
<pre><b>Ввод 1</b>    <b>Ввод 2</b>
5 0       3 -2
<b>Вывод 1</b>   <b>Вывод 2</b>
3         0
</pre>

<a name="icomplex">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font size=+1>
Задача F. Статическая сложность</font><br><br>
Анализ временн<b>о</b>й сложности алгоритмов - важный инструмент создания
эффективных программ. Алгоритмы, выполняемые за линейное время, как правило,
значительно быстрее алгоритмов, требующих для выполнения той же задачи
квадратичного времени, так что предпочтение должно быть отдано первым.
<br><br>
Обычно определяют время выполнения алгоритма по отношению к <i>n</i> -
"размеру" входных данных. Это может быть число объектов, которые нужно
отсортировать, число точек многоугольника и т.п. Поскольку определение формулы
зависимости временн<b>о</b>й сложности алгоритма от <i>n</i> - непростая
задача, было бы замечательно, если бы её можно было автоматизировать. К
сожалению, в общем случае это невозможно. Но в этой задаче мы будем
рассматривать программы очень простой природы, над которыми это можно
проделать. Рассматриваемые программы записаны согласно следующим правилам БНФ,
где <code>&lt;число&gt;</code> может быть любым неотрицательным целым числом:
<ul>
<li><code>&lt;Программа&gt; ::= "BEGIN" &lt;Список&nbsp;операторов&gt; "END"</code>
<li><code>&lt;Список&nbsp;операторов&gt; ::= &lt;Оператор&gt; | &lt;Оператор&gt;
&lt;Список&nbsp;операторов&gt;</code>
<li><code>&lt;Оператор&gt; ::=
&lt;Оператор&nbsp;LOOP&gt; | &lt;Оператор&nbsp;OP&gt;</code>
<li><code>&lt;Оператор LOOP&gt; ::=
&lt;Заголовок&nbsp;LOOP&gt; &lt;Список&nbsp;операторов&gt; "END"</code>
<li><code>&lt;Заголовок&nbsp;LOOP&gt; ::= "LOOP" &lt;число&gt; | "LOOP n"</code>
<li><code>&lt;Оператор&nbsp;OP&gt; ::= "OP" &lt;число&gt;</code>
</ul>
Время выполнения такой программы может быть вычислено следующим образом:
выполнение оператора <code>OP</code> требует столько единиц времени, сколько
указано в его параметре. Список операторов, заключённый в оператор
<code>LOOP</code>, выполняется столько раз, сколько указано в параметре
оператора, то&nbsp;есть или заданное константное число раз, если задано число,
или <i>n</i> раз, если параметром является <code>n</code>. Время выполнения
списка операторов равно сумме времени выполнения его частей. Таким образом,
время выполнения программы в целом зависит от <i>n</i>.
<br><br>
<b>Ввод</b> из файла icomplex.in. В первой строке находится целое число
<i>k</i> - число программ во входном файле. Затем идут <i>k</i> программ,
удовлетворяющих приведённой грамматике. Пробелы и переводы строк могут
встречаться везде в программе, но не в ключевых словах <code>BEGIN</code>,
<code>END</code>, <code>LOOP</code> и <code>OP</code>, нет их и в целых
числах.
<br><br>
<b>Вывод</b> в файл icomplex.out. Для каждой программы сначала идёт строка
с номером программы. В следующей строке записывается время работы программы
в терминах <i>n</i> - многочлен степени не более 10. Многочлен должен быть
записан обычным способом, то&nbsp;есть подобные слагаемые должны быть
приведены, слагаемое с большей степенью должно предшествовать слагаемому
с меньшей степенью, слагаемые с коэффициентом 0 не записываются, множители 1 не
записываются. Общий вид второй строки
"<code>Runtime&nbsp;=&nbsp;a*n^10+b*n^9+...+i*n^2+j*n+k</code>". Если время
выполнения нулевое, нужно вывести "<code>Runtime&nbsp;=&nbsp;0</code>".
За строкой с многочленом должна следовать пустая строка.
<br><br>
<b>Ограничения:</b> вложенность операторов <code>LOOP</code> не превышает 10,
размер входного файла не более 2 Кбайт, коэффициенты многочлена в ответе не
превышают 50&nbsp;000, время&nbsp;1&nbsp;с.
<br><br>
<b>Примеры</b>
<pre><b>Ввод 1</b>
2
BEGIN
  LOOP n
    OP 4
    LOOP 3
      LOOP n
        OP 1
      END
      OP 2
    END
    OP 1
  END
  OP 17
END

BEGIN
 OP 1997 LOOP n LOOP n OP 1 END END
END
<b>Вывод 1</b>
Program #1
Runtime = 3*n^2+11*n+17

Program #2
Runtime = n^2+1997

</pre>

</body>
</html>
