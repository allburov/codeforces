<html>
<head>
 <title>Тренировка S14</title>
 <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
 <meta name="Author" content="Fyodor Menshikov, Vologda, Russia">
 <meta name="E-mail" content="mfv@mail.ru">
 <meta name="Homepage" content="http://www.uni-vologda.ac.ru/~mfv/">
</head>
<body bgcolor=white text=black>

<center><font size=+3>Тренировка S14</font></center><br>

<font size=-1>
Время тестирования приведено для Intel Celeron 400.<br>
Решения должны быть представлены на Turbo Pascal 7.0.
Объём памяти, предоставляемый программе, составляет 500 кб.
</font><br>

<a name="markovc">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font size=+1>
Задача A. Марковский цикл</font><br><br>
Ограниченный алгоритм Маркова состоит из последовательности предложений<br><br>
<center>
<i>s</i><sub>1</sub><i>s</i><sub>2</sub>...<i>s<sub>N</sub></i>
<code>-&gt;</code>
<i>d</i><sub>1</sub><i>d</i><sub>2</sub>...<i>d<sub>N</sub></i>,
</center><br>
где <i>s<sub>i</sub></i> и <i>d<sub>i</sub></i> - символы из алфавита
<code>A</code>, <code>B</code>, <code>C</code>. Подстрока
<i>s</i><sub>1</sub><i>s</i><sub>2</sub>...<i>s<sub>N</sub></i> называется
левой частью, а <i>d</i><sub>1</sub><i>d</i><sub>2</sub>...<i>d<sub>N</sub></i>
- правой частью предложения. 
<br><br>
Алгоритм выполняется над исходной текстовой строкой, состоящей из прописных
латинских букв <code>A</code>, <code>B</code>, <code>C</code>, следующим
образом: перебираются все предложения, начиная с первого. Если левая часть
предложения входит в текстовую строку, то самое левое вхождение заменяется
правой частью этого предложения, и поиск вновь начинается с первого
предложения. Если ни одно предложение не может быть применено, алгоритм
останавливается.
<br><br>
При выполнении алгоритма возможны два результата: либо остановка, либо
бесконечный цикл с определенным периодом. По данной строке и набору предложений
алгоритма Маркова определить количество "ациклических" (выполненных до начала
цикла) шагов и длину самого цикла. Если алгоритм останавливается, то длина
цикла считается нулевой, а все выполненные шаги - ациклическими.
<br><br>
<b>Ввод</b> из файла markovc.in. В первой строке находится исходная текстовая
строка, а в следующих строках - предложения, по одному в строке. Строки могут
содержать произвольное количество незначащих пробелов.
<br><br>
<b>Ограничения:</b> длина исходной текстовой строки и левых частей предложений
- от 1 до 12 букв, количество предложений - от 1 до 50, время&nbsp;3&nbsp;с.
<br><br>
<b>Вывод</b> в файл markovc.out. Вывести два целых числа, разделённых
пробелом - количество ациклических шагов и длину цикла.
<br><br>
<b>Примеры</b>
<pre><b>Ввод 1</b>
ABABC
C  -&gt;A
AB -&gt;BA
BAA-&gt;ABC
<b>Вывод 1</b>
3 3
</pre>

<a name="d44">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font size=+1>
Задача B. Д-44</font><br><br>
При решении задач баллистики следует учитывать сопротивление
воздуха. Пусть сила сопротивления воздуха пропорциональна квадрату модуля
скорости движения снаряда и направлена противоположно скорости. Считая
коэффициент пропорциональности силы сопротивления воздуха квадрату скорости
постоянной величиной, рассчитать дальность полёта снаряда (с точностью до 10 м)
при стрельбе из 85-миллиметровой пушки Д-44 под заданным углом к горизонту,
если масса снаряда равна 9.6 кг, а начальная скорость - 800 м/с. Известно
также, что при стрельбе под углом 45 градусов дальность стрельбы составляет
15&nbsp;650 м. Ускорение свободного падения считать равным
9.8 м/с<sup>2</sup>.<br>
<b>Ограничения:</b> угол от 5 до 85 градусов, время&nbsp;2&nbsp;с.<br>
<b>Ввод</b> из файла d44.in. В первой строке находится единственное
вещественное число - угол в градусах.<br>
<b>Вывод</b> в файл d44.out. Вывести одно целое число - дальность в метрах.<br>
<b>Примеры</b>
<pre><b>Ввод 1</b>
45
<b>Вывод 1</b>
15649
</pre>

<a name="folding">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font size=+1>
Задача C. Упаковка символов</font><br><br>
Билл пытается компактно представить последовательности прописных символов от
<code>A</code> до <code>Z</code> с помощью упаковки повторяющихся
подпоследовательностей внутри них. Например, один из способов представить
последовательность <code>AAAAAAAAAABABABCCD</code> - это
<code>10(A)2(BA)B2(C)D</code>. Он формально определяет сжатые
последовательности символов и правила перевода их в несжатый вид следующим
образом:
<ul>
<li>Последовательность, содержащая один символ от <code>A</code> до
<code>Z</code>, является упакованной. Распаковка этой последовательности даёт
ту же последовательность из одного символа.
<li>Если <code>S</code> и <code>Q</code> - упакованные последовательности, то
<code>SQ</code> - также упакованная последовательность. Если <code>S</code>
распаковывается в <code>S'</code>, а <code>Q</code> распаковывается в
<code>Q'</code>, то <code>SQ</code> распаковывается в <code>S'Q'</code>.
<li>Если <code>S</code> - упакованная последовательность, то <code>X(S)</code>
- также упакованная последовательность, где <code>X</code> - десятичное
представление целого числа, большего 1. Если <code>S</code> распаковывается
в <code>S'</code>, то <code>X(S)</code> распаковывается в <code>S'</code>,
повторённую <code>X</code> раз.
</ul>
Следуя этим правилам, легко распаковать любую заданную упакованную
последовательность. Однако Биллу более интересен обратный переход. Он хочет
упаковать заданную последовательность так, чтобы результирующая сжатая
последовательность содержала наименьшее возможное число символов.<br>
<b>Ограничения:</b> длина исходной последовательности от 1 до 100,
время&nbsp;2&nbsp;с.<br>
<b>Ввод</b> из файла folding.in. В первой строке находится последовательность
символов от <code>A</code> до <code>Z</code>.<br>
<b>Вывод</b> в файл folding.out. В единственной строке выводится упакованная
последовательность наименьшей длины, которая распаковывается в заданную
последовательность. Если таких последовательностей несколько, можно выводить
любую.<br>
<b>Примеры</b>
<pre><b>Ввод 1</b>              <b>Ввод 2</b>
AAAAAAAAAABABABCCD  NEERCYESYESYESNEERCYESYESYES
<b>Вывод 1</b>             <b>Вывод 2</b>
9(A)3(AB)CCD        2(NEERC3(YES))
</pre>

<a name="pyramids">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font size=+1>
Задача D. Пирамиды</font><br><br>
Рассматриваемые пирамиды имеют треугольник в основании, то&nbsp;есть являются
тетраэдрами. Требуется по заданным длинам рёбер пирамиды найти её объём.<br>
<b>Ограничения:</b> длины рёбер - целые положительные числа, не превосходящие
1000, время&nbsp;1&nbsp;с.<br>
<b>Ввод</b> из файла pyramids.in. В первой строке находятся 6 чисел через
пробел - длины рёбер пирамиды <i>ABCD</i>. Порядок рёбер:
<i>AB</i>, <i>AC</i>, <i>AD</i>, <i>BC</i>, <i>BD</i>, <i>CD</i>.<br>
<b>Вывод</b> в файл pyramids.out. Вывести одно вещественное число с четырьмя
знаками после запятой - объём пирамиды.<br>
<b>Примеры</b>
<pre><b>Ввод 1</b>         <b>Ввод 2</b>
1 1 1 1 1 1    1000 1000 1000 3 4 5
<b>Вывод 1</b>        <b>Вывод 2</b>
0.1179         1999.9937
</pre>

<a name="cricket">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font size=+1>
Задача E. Поле для крикета</font><br><br>
<img src="cricket.gif" align=right>
Жил-был жадный Король. Он приказал своему главному Архитектору построить поле
для королевского крикета в парке. Король был таким жадным, что не послушал
предложение своего Архитектора построить поле прямо в центре парка и окружить
его живописным бордюром деревьев, специально посаженных вокруг. Вместо этого он
приказал не срубать деревья и не сажать новых, но построить самое большое поле
для крикета, какое только можно. Если Король обнаружит, что Архитектор посмел
тронуть даже единственное дерево в парке или спроектировал меньшее поле,
чем было возможно, Архитектор лишится головы. Более того, он потребовал от
Архитектора представить план поля, где указаны его точное положение и размер.
<br><br>
Ваша задача - помочь бедному Архитектору сохранить голову, написав программу,
которая найдёт максимальный размер поля для крикета и его положение внутри
парка, удовлетворяющие требованиям Короля.
<br><br>
Задача слегка упрощена тем, что парк Короля имеет прямоугольную форму и
расположен на плоской поверхности. Более того, границы парка параллельны
направлениям север - юг и восток - запад. В то же время игра в королевский
крикет всегда происходит на квадратном поле, границы которого также параллельны
направлениям север - юг и восток - запад. Архитектор уже сопоставил парку
прямоугольную декартову систему координат и точно определил координаты каждого
дерева. Оси этой системы координат, конечно, параллельны направлениям
север - юг и восток - запад. Юго-западный угол парка имеет координаты
(0,&nbsp;0), а северо-восточный - координаты (<i>W</i>,&nbsp;<i>H</i>),
где <i>W</i> и <i>H</i> - длина и ширина парка соответственно.
<br><br>
В этой задаче вы можете пренебречь диаметром деревьев. Деревья не могут
находиться внутри поля для крикета, но могут располагаться на его сторонах.
Поле для крикета может также касаться границы парка, но не должно лежать вне
парка.
<br><br>
<b>Ввод</b> из файла cricket.in. Первая строка содержит три целых числа,
<i>N</i>, <i>W</i> и <i>H</i>, разделённых пробелами: <i>N</i> - число деревьев
в парке, <i>W</i> и <i>H</i> - длина и ширина парка соответственно.
<br><br>
Следующие <i>N</i> строк описывают координаты деревьев в парке. Каждая строка
содержит два целых числа <i>x<sub>i</sub></i> и <i>y<sub>i</sub></i>,
разделённых пробелом и представляющих собой координаты <i>i</i>-го дерева.
Все деревья имеют различные координаты.
<br><br>
<b>Ограничения:</b> 1&nbsp;&lt;=&nbsp;<i>N</i>&nbsp;&lt;=&nbsp;100,
1&nbsp;&lt;=&nbsp;<i>W</i>,&nbsp;<i>H</i>&nbsp;&lt;=&nbsp;10&nbsp;000,
0&nbsp;&lt;=&nbsp;<i>x<sub>i</sub></i>&nbsp;&lt;=&nbsp;<i>W</i>,
0&nbsp;&lt;=&nbsp;<i>y<sub>i</sub></i>&nbsp;&lt;=&nbsp;<i>H</i>,
время&nbsp;1&nbsp;с.
<br><br>
<b>Вывод</b> в файл cricket.out. Вывести через пробел три целых числа,
<i>P</i>, <i>Q</i> и <i>L</i>, где (<i>P</i>,&nbsp;<i>Q</i>) - координаты
юго-западного угла поля для крикета, <i>L</i> - длина его сторон. Если
существует несколько возможных положений поля максимального размера, вывести
любое.
<br><br>
<b>Примеры</b>
<pre><b>Ввод 1</b>
7 10 7
3 2
4 2
7 0
7 3
4 5
2 4
1 7
<b>Вывод 1</b>
4 3 4
</pre>

<a name="sprsheet">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font size=+1>
Задача F. Электронная таблица</font><br><br>
Напишите программу, выполняющую функции очень простой электронной таблицы. Она
работает с таблицей из 9 строк от <code>1</code> до <code>9</code> и 26
столбцов от <code>A</code> до <code>Z</code>. Клетки таблицы обозначаются
именами, составленными из кодов столбца и строки, например, <code>B1</code>,
<code>S8</code>.
<br><br>
Каждая клетка содержит выражение. Выражения используют целые константы, ссылки
на клетки, скобки, бинарные операторы <code>+</code>, <code>-</code>,
<code>*</code> и <code>/</code> (целочисленное деление). Например,
<code>567</code>, <code>E8/2</code>, <code>(3+B3)*(C4-1)</code> являются
правильными выражениями. Все операторы целочисленные. Деление на ноль даёт
в результате ноль.
<br><br>
Если значение ячейки, на которую ссылается некоторое выражение, не определено,
оно считается равным нулю. Ситуация, когда две или более ячейки зависят друг от
друга, является отдельным случаем - циклической ссылкой.
<br><br>
<b>Ограничения:</b> длина выражения в одной ячейке до 255 символов, все
аргументы и результаты меньше 1&nbsp;000&nbsp;000, время&nbsp;1&nbsp;с.
<br><br>
<b>Ввод</b> из файла sprsheet.in. Первая строка содержит число выражений
<i>N</i>. Следующие <i>N</i> строк имеют формат
&lt;Имя&nbsp;клетки&gt;=&lt;выражение&gt;. Все выражения корректные,
и каждая ячейка определена не более чем одним выражением.
<br><br>
<b>Вывод</b> в файл sprsheet.out. В единственной строке выводится или значение
клетки <code>A1</code>, или число <code>1000000</code> (один миллион), если
значение клетки <code>A1</code> не может быть найдено из-за циклической ссылки.
<br><br>
<b>Примеры</b>
<pre><b>Ввод 1</b>
4
A1=B1+C5
B1=20
C5 =B1 /D7-E1*E1
 E1=(3+1)*2
<b>Вывод 1</b>
-44
</pre>

</body>
</html>
